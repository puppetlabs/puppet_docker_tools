#!/usr/bin/env ruby

require 'docker'
require 'date'
require 'time'

platforms=ARGV

if platforms.empty?
  platforms = ['ubuntu:16.04', 'centos:7', 'alpine:3.4', 'debian:9', 'postgres:9.6.8']
end

platforms.each do |platform|
  image = Docker::Image.create('fromImage' => platform)
  timestamp = image.info["Created"]
  if "#{timestamp}" =~ /^\d+$/
    timestamp = Time.at(image.info["Created"]).utc.iso8601
  end
  puts "Pulled #{image.info["RepoTags"].first}, last updated #{timestamp}"
end
